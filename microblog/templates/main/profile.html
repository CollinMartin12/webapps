{% extends 'base.html' %}

{% block content %}
<div class="container"></div>
  <main class="main-content">
    <div class="content-area">
      
      <!-- âœ… Page title with user name -->
      <header class="page-header">
        <h1 class="page-title">{{ user.name }}'s Profile</h1>
      </header>

      <div class="profile-header">
        <div class="profile-banner"></div>
        <div class="profile-info">
          <div class="profile-avatar"></div>
          <div class="profile-details">
            <h2 class="profile-name">{{ user.name }}</h2>
            <div class="profile-email">{{ user.email }}</div>
            <div class="profile-stats">
              <span><strong>{{ posts|length }}</strong> Posts</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Tabs (static placeholders for now) -->
      <div class="profile-tabs">
        <a href="#" class="profile-tab active">Posts</a>
        <a href="#" class="profile-tab">Replies</a>
        <a href="#" class="profile-tab">Media</a>
        <a href="#" class="profile-tab">Likes</a>
        {% if follow_button == "follow" %}
        <form action="{{ url_for('main.follow', user_id=user.id) }}" method="post">
            <input type="submit" value="Follow">
        </form>
        {% elif follow_button == "unfollow" %}
        <form action="{{ url_for('main.unfollow', user_id=user.id) }}" method="post">
            <input type="submit" value="Unfollow">
        </form>
        {% endif %}
      </div>
      <div class="following-block">
        <h3 style="margin-bottom: .5rem;">
          Following ({{ user.following|length }})
        </h3>
        {% if user.following %}
          <ul style="list-style:none; padding-left:0; margin:0;">
            {% for u in user.following %}
              <li style="margin:.25rem 0;">
                <a href="{{ url_for('main.user_profile', user_id=u.id) }}">
                  {{ u.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="empty">Not following anyone yet.</div>
        {% endif %}
    <div class="followers-block">
      <h3 style="margin-bottom: .5rem;">
        Followers ({{ user.followers|length }})
      </h3>
      {% if user.followers %}
        <ul style="list-style:none; padding-left:0; margin:0;">
          {% for u in user.followers %}
            <li style="margin:.25rem 0;">
              <a href="{{ url_for('main.user_profile', user_id=u.id) }}">
                {{ u.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="empty">No followers yet.</div>
      {% endif %}
    </div>

      <!-- Posts Feed -->
      <div class="posts-feed">
        {% include 'posts_template.html' %}
      </div>
    </div>

    <aside class="right-sidebar">
      <div class="search-box">
        <input type="text" placeholder="Search MyBlog">
      </div>

      <div class="trending">
        <h3>Profile Activity</h3>
        <div class="trending-item">
          <div class="trend">Posts this month</div>
          <div class="tweets-count">23 posts</div>
        </div>
        <div class="trending-item">
          <div class="trend">Total likes received</div>
          <div class="tweets-count">1,247 likes</div>
        </div>
        <div class="trending-item">
          <div class="trend">Most popular post</div>
          <div class="tweets-count">89 likes</div>
        </div>
      </div>

      <div class="trending">
        <h3>Trending Topics For You</h3>
        <div class="trending-item">
          <a href="#" class="trend">#WebDevelopment</a>
          <div class="tweets-count">12.5K posts</div>
        </div>
        <div class="trending-item">
          <a href="#" class="trend">#JavaScript</a>
          <div class="tweets-count">8.2K posts</div>
        </div>
        <div class="trending-item">
          <a href="#" class="trend">#React</a>
          <div class="tweets-count">6.7K posts</div>
        </div>
      </div>
    </aside>
  </main>
</div>
{% endblock %}